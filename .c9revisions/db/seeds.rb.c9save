{"ts":1375753836378,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"# This file should contain all the record creation needed to seed the database with its default values.\n# The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).\n#\n# Examples:\n#\n#   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])\n#   Mayor.create(name: 'Emanuel', city: cities.first)\n"]],"start1":0,"start2":0,"length1":0,"length2":343}]],"length":343}
{"contributors":[],"silentsave":false,"ts":1375753839080,"patch":[[{"diffs":[[0,"# "],[-1,"This file should "],[1,"encoding: utf-8\r\ndef get_model_names_sub\r\n      Dir['app/models/*.rb'].map {|f| File.basename(f, '.*').camelize."],[0,"con"],[1,"s"],[0,"ta"],[-1,"in all the record creation needed to seed the database with its default values.\n# The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).\n#\n# Examples:\n#\n#   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])\n#   Mayor.create(name: 'Emanuel', city: cities.first)\n"],[1,"ntize.name }.reject!{|m| m.constantize.superclass != ActiveRecord::Base }\r\nend\r\n\r\nputs \"# --- Populando o Banco de Dados --- #\"\r\n\r\nputs \"--- Inserindo Permissões ---\"\r\nget_model_names_sub.each do |models_names|\r\n\t%w{index create update new show edit destroy search}.each do |action|\r\n\t\tputs \"Criando permissão para acessar #{action} em #{models_names}\"\r\n\t\tPermission.find_or_create_by_action_and_subject_class(action, models_names)\r\n\tend\r\nend\r\n\r\nputs \"--- Inserindo Usuário Com Role e Permissão ---\"\r\nuser_permissions = Permission.where(:subject_class => 'User')\r\nputs '--- Inserindo Role ---'\r\nrole = Role.find_or_create_by_name('user')\r\nrole.permissions.destroy_all\r\nrole.permissions << user_permissions\r\nrole.save\r\nrole_admin = Role.find_or_create_by_name('admin')\r\nputs '--- Inserindo Usuários ---'\r\nUser.destroy_all\r\nUser.create(:email => 'user@user.com.br', :password => '123456', :role_id => role.id)\r\n\r\nUser.create(:email => 'admin@admin.com.br', :password => '123456', :role_id => role_admin.id)\r\nputs \"# --- Fim --- #\""]],"start1":0,"start2":0,"length1":343,"length2":1148}]],"length":1148,"saved":false}
